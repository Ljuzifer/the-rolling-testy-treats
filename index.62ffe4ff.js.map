{"mappings":"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","sources":["src/js/popular-recipe.js"],"sourcesContent":["   const closeSVG = document.querySelector('.close-recipe-svg');\n    const backDrop = document.querySelector('.backdrop');\n    const popUp = document.querySelector('.pop-up-recipe');\n    const videoContainer = document.getElementById('video-container');\n    let player;\n\n    const BASE_URL = 'https://tasty-treats-backend.p.goit.global/api/recipes/';\n    const SECOND_URL = 'https://tasty-treats-backend.p.goit.global/api/ingredients';\n    const API_KEY = 'AIzaSyAX44YCtOJPGkNiZtRXagJevTZUvVOUYVc';\n\n    function getRandomIndex(max) {\n        return Math.floor(Math.random() * max);\n    }\n    // function fetchIngredientsData() {\n    //     fetch(SECOND_URL)\n    //         .then(response => response.json())\n    //         .then(data => {\n    //             console.log(data);\n    //         })\n    //         .catch(error => {\n    //             console.error('Error fetching data:', error);\n    //         });\n    // }\n    function fetchRecipeData() {\n        Promise.all([fetch(BASE_URL), fetch(SECOND_URL)])\n            .then(responses => Promise.all(responses.map(response => response.json())))\n            .then(data => {\n                const recipesData = data[0].results;\n                const ingredientsData = data[1];\n    \n                const recipeHeader = document.querySelector('.pop-up-recipe-header');\n                const recipeDescription = document.querySelector('.recipe-description');\n                const tagsList = document.querySelector('.tags-buttons');\n                tagsList.innerHTML = '';\n                const recipeIngredients = document.querySelector('.recipe-list');\n                recipeIngredients.innerHTML = '';\n                const recipeRatingElement = document.querySelector('.rating-value');\n                const recipeTime = document.querySelector('.span-time');\n    \n                const randomIndex = getRandomIndex(recipesData.length);\n                const recipe = recipesData[randomIndex];\n    \n                const title = recipe.title;\n                const videoId = getYouTubeVideoId(recipe.youtube);\n    const videoSrc = `https://www.youtube.com/embed/${videoId}?enablejsapi=1&origin=https://your-origin.com&modestbranding=1&rel=0&autoplay=1&showinfo=0&controls=1&mute=0&loop=0&iv_load_policy=3&cc_load_policy=1&start=0&theme=light&color=white&fs=1&autohide=2&enablejsapi=1`;\n                const description = recipe.instructions;\n                const tags = recipe.tags;\n                const ingredients = recipe.ingredients;\n                const ratingValue = recipe.rating;\n                const timeValue = recipe.time;\n    \n                recipeRatingElement.textContent = ratingValue;\n                recipeTime.textContent = `${timeValue} min`;\n    \n                recipeDescription.textContent = description;\n    \n                recipeHeader.textContent = title;\n    \n                ingredients.forEach(ingredient => {\n                    const matchedIngredient = ingredientsData.find(data => data._id === ingredient.id);\n                    if (matchedIngredient) {\n                        ingredient.name = matchedIngredient.name;\n                    }\n                });\n    \n                ingredients.forEach(ingredient => {\n                    const ingredientItem = document.createElement('li');\n                    const ingredientName = document.createElement('span');\n                    ingredientName.textContent = ingredient.name;\n                    ingredientName.classList.add('ingredient-name');\n    \n                    const measureContent = document.createElement('span');\n                    measureContent.textContent = ingredient.measure;\n                    measureContent.classList.add('measure-content');\n    \n                    ingredientItem.classList.add('recipe-item');\n                    ingredientItem.appendChild(ingredientName);\n                    ingredientItem.appendChild(measureContent);\n    \n                    recipeIngredients.appendChild(ingredientItem);\n                });\n    \n                if (tags.length > 0) {\n                    tags.forEach(tag => {\n                        const tagBtn = document.createElement('button');\n                        tagBtn.textContent = `#${tag}`;\n                        tagBtn.classList.add('tag-btn');\n                        tagsList.appendChild(tagBtn);\n                    });\n    \n                    const tagButtons = document.querySelectorAll('.tags-buttons .tag-btn');\n                    tagButtons.forEach(button => {\n                        button.style.display = 'inline-block';\n                    });\n                }\n    \n                createYouTubePlayer(videoSrc);\n            })\n            .catch(error => console.log(error.message));\n    }\n\n    function closePopUPRecipe() {\n        closeSVG.addEventListener('click', onClickSVG);\n        document.addEventListener('keydown', onDocumentKeyDown);\n    }\n\n    function onDocumentKeyDown(event) {\n        if (event.key === 'Escape') {\n            onClickSVG();\n        }\n    }\n\n    function onClickSVG() {\n        closeModal();\n    }\n\n    function onClickBackDrop(event) {\n        if (event.target === backDrop) {\n            closeModal();\n        }\n    }\n\n    function closeModal() {\n        backDrop.classList.add('hidden');\n        popUp.classList.add('hidden');\n        if (typeof player !== 'undefined') {\n            player.stopVideo();\n        }\n    }\n\n    function createYouTubePlayer(videoSrc) {\n        player = new YT.Player('video-container', {\n            videoId: getYouTubeVideoId(videoSrc),\n            playerVars: {\n                // Дополнительные параметры плеера, если нужно\n                // Например, autoplay: 1 (1 - включить автовоспроизведение, 0 - выключить)\n            },\n            events: {\n                onStateChange: onPlayerStateChange\n            }\n        });\n    }\n\n    function onPlayerStateChange(event) {\n        if (event.data === YT.PlayerState.PLAYING) {\n            player.getIframe().contentWindow.addEventListener('keydown', onPlayerKeyDown);\n        } else {\n            player.getIframe().contentWindow.removeEventListener('keydown', onPlayerKeyDown);\n        }\n    }\n\n    function getYouTubeVideoId(videoSrc) {\n        const videoIdMatch = videoSrc.match(/(?:\\?v=|\\/embed\\/|\\.be\\/)([\\w\\-]{11})/);\n        return videoIdMatch ? videoIdMatch[1] : null;\n    }\n\n    document.querySelector('.btn-add-favourite').addEventListener('click', onFavouriteBtnClick);\n\n    function onFavouriteBtnClick() {\n        const favouriteBtn = document.querySelector('.btn-add-favourite');\n        if (favouriteBtn.classList.contains('favourite')) {\n            favouriteBtn.classList.remove('favourite');\n            favouriteBtn.textContent = 'Add to Favorite';\n        } else {\n            favouriteBtn.classList.add('favourite');\n            favouriteBtn.textContent = 'Remove from favorite';\n        }\n    }\n\n    backDrop.addEventListener('click', onClickBackDrop);\n\n    fetchRecipeData();\n    createYouTubePlayer(); // вызываем createYouTubePlayer() перед clickONBackDrop()\n    fetchIngredientsData()\n    closePopUPRecipe();"],"names":["$6e6922e358212f3a$var$player","$6e6922e358212f3a$var$closeSVG","document","querySelector","$6e6922e358212f3a$var$backDrop","$6e6922e358212f3a$var$popUp","getElementById","$6e6922e358212f3a$var$onDocumentKeyDown","event","key","$6e6922e358212f3a$var$onClickSVG","$6e6922e358212f3a$var$closeModal","classList","add","stopVideo","$6e6922e358212f3a$var$createYouTubePlayer","videoSrc","YT","Player","videoId","$6e6922e358212f3a$var$getYouTubeVideoId","playerVars","events","onStateChange","$6e6922e358212f3a$var$onPlayerStateChange","data","PlayerState","PLAYING","getIframe","contentWindow","addEventListener","onPlayerKeyDown","removeEventListener","videoIdMatch","match","favouriteBtn","contains","remove","textContent","target","Promise","all","fetch","then","responses","map","response","json","data1","recipesData","results","ingredientsData","recipeHeader","recipeDescription","tagsList","innerHTML","recipeIngredients","max","recipeRatingElement","recipeTime","recipe","length","Math","floor","random","title","youtube","concat","description","instructions","tags","ingredients","ratingValue","rating","timeValue","time","forEach","ingredient","matchedIngredient","find","_id","id","name","ingredientItem","createElement","ingredientName","measureContent","measure","appendChild","tag","tagBtn","querySelectorAll","button","style","display","catch","error","console","log","message","fetchIngredientsData"],"version":3,"file":"index.62ffe4ff.js.map"}