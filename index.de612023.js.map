{"mappings":"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","sources":["src/js/popular-recipe.js"],"sourcesContent":["const closeSVG = document.querySelector('.close-recipe-svg');\nconst backDrop = document.querySelector('.backdrop-popup-recipe');\nconst popUp = document.querySelector('.pop-up-recipe');\nconst videoContainer = document.querySelector('#video-container');\nlet player;\n\nconst BASE_URL_POPUP =\n  'https://tasty-treats-backend.p.goit.global/api/recipes/';\nconst SECOND_URL = 'https://tasty-treats-backend.p.goit.global/api/ingredients';\nconst API_KEY = 'AIzaSyAX44YCtOJPGkNiZtRXagJevTZUvVOUYVc';\n\nfunction getRandomIndex(max) {\n  return Math.floor(Math.random() * max);\n}\n\nfunction fetchRecipeData() {\n  Promise.all([fetch(BASE_URL_POPUP), fetch(SECOND_URL)])\n    .then(responses => Promise.all(responses.map(response => response.json())))\n    .then(data => {\n      const recipesData = data[0].results;\n      const ingredientsData = data[1];\n\n      const recipeHeader = document.querySelector('.pop-up-recipe-header');\n      const recipeDescription = document.querySelector('.recipe-description');\n      const tagsList = document.querySelector('.tags-buttons');\n      tagsList.innerHTML = '';\n      const recipeIngredients = document.querySelector('.recipe-list');\n      recipeIngredients.innerHTML = '';\n      const recipeRatingElement = document.querySelector('.rating-value');\n      const recipeTime = document.querySelector('.span-time');\n\n      const randomIndex = getRandomIndex(recipesData.length);\n      const recipe = recipesData[randomIndex];\n\n      const title = recipe.title;\n      const videoId = getYouTubeVideoId(recipe.youtube);\n      const videoSrc = `https://www.youtube.com/embed/${videoId}?enablejsapi=1&origin=https://your-origin.com&modestbranding=1&rel=0&autoplay=1&showinfo=0&controls=1&mute=0&loop=0&iv_load_policy=3&cc_load_policy=1&start=0&theme=light&color=white&fs=1&autohide=2&enablejsapi=1`;\n      const description = recipe.instructions;\n      const tags = recipe.tags;\n      const ingredients = recipe.ingredients;\n      const ratingValue = recipe.rating;\n      const timeValue = recipe.time;\n\n      recipeRatingElement.textContent = ratingValue;\n      recipeTime.textContent = `${timeValue} min`;\n\n      recipeDescription.textContent = description;\n\n      recipeHeader.textContent = title;\n\n      ingredients.forEach(ingredient => {\n        const matchedIngredient = ingredientsData.find(\n          data => data._id === ingredient.id\n        );\n        if (matchedIngredient) {\n          ingredient.name = matchedIngredient.name;\n        }\n      });\n\n      ingredients.forEach(ingredient => {\n        const ingredientItem = document.createElement('li');\n        const ingredientName = document.createElement('span');\n        ingredientName.textContent = ingredient.name;\n        ingredientName.classList.add('ingredient-name');\n\n        const measureContent = document.createElement('span');\n        measureContent.textContent = ingredient.measure;\n        measureContent.classList.add('measure-content');\n\n        ingredientItem.classList.add('recipe-item');\n        ingredientItem.appendChild(ingredientName);\n        ingredientItem.appendChild(measureContent);\n\n        recipeIngredients.appendChild(ingredientItem);\n      });\n\n      if (tags.length > 0) {\n        tags.forEach(tag => {\n          const tagBtn = document.createElement('button');\n          tagBtn.textContent = `#${tag}`;\n          tagBtn.classList.add('tag-btn');\n          tagsList.appendChild(tagBtn);\n        });\n\n        const tagButtons = document.querySelectorAll('.tags-buttons .tag-btn');\n        tagButtons.forEach(button => {\n          button.style.display = 'inline-block';\n        });\n      }\n\n      createYouTubePlayer(videoSrc);\n    })\n    .catch(error => console.log(error.message));\n}\ncloseSVG.addEventListener('click', onClickSVG);\n\nfunction onClickSVG() {\n  stopVideoAndCloseModal();\n}\n\nbackDrop.addEventListener('click', onClickBackDrop);\n\nfunction onClickBackDrop(event) {\n  if (event.target === backDrop) {\n    stopVideoAndCloseModal();\n  }\n}\n\ndocument.addEventListener('keydown', onDocumentKeyDown);\n\nfunction onDocumentKeyDown(event) {\n  if (event.key === 'Escape') {\n    popUp.style.display = 'none';\n    backDrop.style.display = 'none';\n  }\n}\n\nfunction stopVideoAndCloseModal() {\n  if (typeof player !== 'undefined' && typeof player.stopVideo === 'function') {\n    player.stopVideo();\n  }\n\n  popUp.style.display = 'none';\n  backDrop.style.display = 'none';\n}\n\nfunction createYouTubePlayer(videoSrc) {\n  player = new YT.Player('video-container', {\n    videoId: getYouTubeVideoId(videoSrc),\n    playerVars: {\n      // Дополнительные параметры плеера, если нужно\n      // Например, autoplay: 1 (1 - включить автовоспроизведение, 0 - выключить)\n    },\n    events: {\n      onStateChange: onPlayerStateChange,\n    },\n  });\n}\n\nfunction onPlayerStateChange(event) {\n  if (event.data === YT.PlayerState.PLAYING) {\n    player\n      .getIframe()\n      .contentWindow.addEventListener('keydown', onPlayerKeyDown);\n  } else {\n    player\n      .getIframe()\n      .contentWindow.removeEventListener('keydown', onPlayerKeyDown);\n  }\n}\n\nfunction getYouTubeVideoId(videoSrc) {\n  const videoIdMatch = videoSrc.match(/(?:\\?v=|\\/embed\\/|\\.be\\/)([\\w\\-]{11})/);\n  return videoIdMatch ? videoIdMatch[1] : null;\n}\n\ndocument\n  .querySelector('.btn-add-favourite')\n  .addEventListener('click', onFavouriteBtnClick);\n\nfunction onFavouriteBtnClick() {\n  const favouriteBtn = document.querySelector('.btn-add-favourite');\n  if (favouriteBtn.classList.contains('favourite-popup-recipe')) {\n    favouriteBtn.classList.remove('favourite-popup-recipe');\n    favouriteBtn.textContent = 'Add to Favorite';\n  } else {\n    favouriteBtn.classList.add('favourite-popup-recipe');\n    favouriteBtn.textContent = 'Remove from favorite';\n  }\n}\nconst seeRecipe = document.querySelector('.recipe_desc_btn');\n\nseeRecipe.addEventListener('click', onClickRecipeDescrBtn);\nfunction onClickRecipeDescrBtn() {\n  // Toggle the visibility of the modal and backdrop using classes\n  popUpRecipe.classList.add('show-modal');\n  backdropPopupRecipe.classList.add('show-modal');\n}\n\nfetchRecipeData();\n\n// const backDrop = document.querySelector('.backdrop');\n// const popUp = document.querySelector('.pop-up-recipe');\n// const videoContainer = document.getElementById('video-container');\n// let player;\n\n// const BASE_URL = 'https://tasty-treats-backend.p.goit.global/api/recipes/';\n// const SECOND_URL = 'https://tasty-treats-backend.p.goit.global/api/ingredients';\n// const API_KEY = 'AIzaSyAX44YCtOJPGkNiZtRXagJevTZUvVOUYVc';\n\n// function getRandomIndex(max) {\n//   return Math.floor(Math.random() * max);\n// }\n// function fetchIngredientsData() {\n//     fetch(SECOND_URL)\n//         .then(response => response.json())\n//         .then(data => {\n//             console.log(data);\n//         })\n//         .catch(error => {\n//             console.error('Error fetching data:', error);\n//         });\n// }\n// function fetchRecipeData() {\n//   Promise.all([fetch(BASE_URL), fetch(SECOND_URL)])\n//     .then(responses => Promise.all(responses.map(response => response.json())))\n//     .then(data => {\n//       const recipesData = data[0].results;\n//       const ingredientsData = data[1];\n\n//       const recipeHeader = document.querySelector('.pop-up-recipe-header');\n//       const recipeDescription = document.querySelector('.recipe-description');\n//       const tagsList = document.querySelector('.tags-buttons');\n//       tagsList.innerHTML = '';\n//       const recipeIngredients = document.querySelector('.recipe-list');\n//       recipeIngredients.innerHTML = '';\n//       const recipeRatingElement = document.querySelector('.rating-value');\n//       const recipeTime = document.querySelector('.span-time');\n\n//       const randomIndex = getRandomIndex(recipesData.length);\n//       const recipe = recipesData[randomIndex];\n\n//       const title = recipe.title;\n//       const videoId = getYouTubeVideoId(recipe.youtube);\n//       const videoSrc = `https://www.youtube.com/embed/${videoId}?enablejsapi=1&origin=https://your-origin.com&modestbranding=1&rel=0&autoplay=1&showinfo=0&controls=1&mute=0&loop=0&iv_load_policy=3&cc_load_policy=1&start=0&theme=light&color=white&fs=1&autohide=2&enablejsapi=1`;\n//       const description = recipe.instructions;\n//       const tags = recipe.tags;\n//       const ingredients = recipe.ingredients;\n//       const ratingValue = recipe.rating;\n//       const timeValue = recipe.time;\n\n//       recipeRatingElement.textContent = ratingValue;\n//       recipeTime.textContent = `${timeValue} min`;\n\n//       recipeDescription.textContent = description;\n\n//       recipeHeader.textContent = title;\n\n//       ingredients.forEach(ingredient => {\n//         const matchedIngredient = ingredientsData.find(\n//           data => data._id === ingredient.id\n//         );\n//         if (matchedIngredient) {\n//           ingredient.name = matchedIngredient.name;\n//         }\n//       });\n\n//       ingredients.forEach(ingredient => {\n//         const ingredientItem = document.createElement('li');\n//         const ingredientName = document.createElement('span');\n//         ingredientName.textContent = ingredient.name;\n//         ingredientName.classList.add('ingredient-name');\n\n//         const measureContent = document.createElement('span');\n//         measureContent.textContent = ingredient.measure;\n//         measureContent.classList.add('measure-content');\n\n//         ingredientItem.classList.add('recipe-item');\n//         ingredientItem.appendChild(ingredientName);\n//         ingredientItem.appendChild(measureContent);\n\n//         recipeIngredients.appendChild(ingredientItem);\n//       });\n\n//       if (tags.length > 0) {\n//         tags.forEach(tag => {\n//           const tagBtn = document.createElement('button');\n//           tagBtn.textContent = `#${tag}`;\n//           tagBtn.classList.add('tag-btn');\n//           tagsList.appendChild(tagBtn);\n//         });\n\n//         const tagButtons = document.querySelectorAll('.tags-buttons .tag-btn');\n//         tagButtons.forEach(button => {\n//           button.style.display = 'inline-block';\n//         });\n//       }\n\n//       createYouTubePlayer(videoSrc);\n//     })\n//     .catch(error => console.log(error.message));\n// }\n\n// function closePopUPRecipe() {\n//   closeSVG.addEventListener('click', onClickSVG);\n//   document.addEventListener('keydown', onDocumentKeyDown);\n// }\n\n// function onDocumentKeyDown(event) {\n//   if (event.key === 'Escape') {\n//     onClickSVG();\n//   }\n// }\n\n// function onClickSVG() {\n//   closeModal();\n// }\n\n// function onClickBackDrop(event) {\n//   if (event.target === backDrop) {\n//     closeModal();\n//   }\n// }\n\n// function closeModal() {\n//   backDrop.classList.add('hidden');\n//   popUp.classList.add('hidden');\n//   if (typeof player !== 'undefined') {\n//     player.stopVideo();\n//   }\n// }\n\n// function createYouTubePlayer(videoSrc) {\n//   player = new YT.Player('video-container', {\n//     videoId: getYouTubeVideoId(videoSrc),\n//     playerVars: {\n//       // Дополнительные параметры плеера, если нужно\n//       // Например, autoplay: 1 (1 - включить автовоспроизведение, 0 - выключить)\n//     },\n//     events: {\n//       onStateChange: onPlayerStateChange,\n//     },\n//   });\n// }\n\n// function onPlayerStateChange(event) {\n//   if (event.data === YT.PlayerState.PLAYING) {\n//     player\n//       .getIframe()\n//       .contentWindow.addEventListener('keydown', onPlayerKeyDown);\n//   } else {\n//     player\n//       .getIframe()\n//       .contentWindow.removeEventListener('keydown', onPlayerKeyDown);\n//   }\n// }\n\n// function getYouTubeVideoId(videoSrc) {\n//   const videoIdMatch = videoSrc.match(/(?:\\?v=|\\/embed\\/|\\.be\\/)([\\w\\-]{11})/);\n//   return videoIdMatch ? videoIdMatch[1] : null;\n// }\n\n// document\n//   .querySelector('.btn-add-favourite')\n//   .addEventListener('click', onFavouriteBtnClick);\n\n// function onFavouriteBtnClick() {\n//   const favouriteBtn = document.querySelector('.btn-add-favourite');\n//   if (favouriteBtn.classList.contains('favourite')) {\n//     favouriteBtn.classList.remove('favourite');\n//     favouriteBtn.textContent = 'Add to Favorite';\n//   } else {\n//     favouriteBtn.classList.add('favourite');\n//     favouriteBtn.textContent = 'Remove from favorite';\n//   }\n// }\n\n// backDrop.addEventListener('click', onClickBackDrop);\n\n// fetchRecipeData();\n"],"names":["player","closeSVG","document","querySelector","backDrop","popUp","videoContainer","BASE_URL_POPUP","SECOND_URL","API_KEY","getRandomIndex","max","Math","floor","random","fetchRecipeData","Promise","all","fetch","then","responses","map","response","json","data1","recipesData","results","ingredientsData","recipeHeader","recipeDescription","tagsList","innerHTML","recipeIngredients","recipeRatingElement","recipeTime","recipe","length","title","videoId","getYouTubeVideoId","youtube","videoSrc","concat","description","instructions","tags","ingredients","ratingValue","rating","timeValue","time","textContent","forEach","ingredient","matchedIngredient","find","data","_id","id","name","ingredientItem","createElement","ingredientName","classList","add","measureContent","measure","appendChild","tag","tagBtn","querySelectorAll","button","style","display","createYouTubePlayer","catch","error","console","log","message","onClickSVG","stopVideoAndCloseModal","onClickBackDrop","event","target","onDocumentKeyDown","key","stopVideo","YT","Player","playerVars","events","onStateChange","onPlayerStateChange","PlayerState","PLAYING","getIframe","contentWindow","addEventListener","onPlayerKeyDown","removeEventListener","videoIdMatch","match","onFavouriteBtnClick","favouriteBtn","contains","remove","seeRecipe","onClickRecipeDescrBtn","popUpRecipe","backdropPopupRecipe"],"version":3,"file":"index.de612023.js.map"}