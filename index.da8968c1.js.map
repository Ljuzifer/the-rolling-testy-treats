{"mappings":"sgBAAG,MAAMA,EAAWC,SAASC,cAAc,qBACjCC,EAAWF,SAASC,cAAc,aAClCE,EAAQH,SAASC,cAAc,kBACdD,SAASI,eAAe,mBAC/C,IAAIC,EAsGJ,SAASC,EAAkBC,GACL,WAAdA,EAAMC,KACNC,G,CAIR,SAASA,IACLC,G,CASJ,SAASA,IACLR,EAASS,UAAUC,IAAI,UACvBT,EAAMQ,UAAUC,IAAI,eACE,IAAXP,GACPA,EAAOQ,W,CAIf,SAASC,EAAoBC,GACzBV,EAAS,IAAIW,GAAGC,OAAO,kBAAmB,CACtCC,QAASC,EAAkBJ,GAC3BK,WAAY,C,EAIZC,OAAQ,CACJC,cAAeC,I,CAK3B,SAASA,EAAoBhB,GACrBA,EAAMiB,OAASR,GAAGS,YAAYC,QAC9BrB,EAAOsB,YAAYC,cAAcC,iBAAiB,UAAWC,iBAE7DzB,EAAOsB,YAAYC,cAAcG,oBAAoB,UAAWD,gB,CAIxE,SAASX,EAAkBJ,GACvB,MAAMiB,EAAejB,EAASkB,MAAK,yCACnC,OAAOD,EAAeA,EAAa,GAAK,I,CAG5ChC,SAASC,cAAc,sBAAsB4B,iBAAiB,SAE9D,WACI,MAAMK,EAAelC,SAASC,cAAc,sBACxCiC,EAAavB,UAAUwB,SAAS,cAChCD,EAAavB,UAAUyB,OAAO,aAC9BF,EAAaG,YAAc,oBAE3BH,EAAavB,UAAUC,IAAI,aAC3BsB,EAAaG,YAAc,uB,IAInCnC,EAAS2B,iBAAiB,SArD1B,SAAyBtB,GACjBA,EAAM+B,SAAWpC,GACjBQ,G,IA9FJ6B,QAAQC,IAAI,CAACC,MAlBA,2DAkBiBA,MAjBf,gEAkBVC,MAAKC,GAAaJ,QAAQC,IAAIG,EAAUC,KAAIC,GAAYA,EAASC,YACjEJ,MAAKK,IACF,MAAMC,EAAcD,EAAK,GAAGE,QACtBC,EAAkBH,EAAK,GAEvBI,EAAenD,SAASC,cAAc,yBACtCmD,EAAoBpD,SAASC,cAAc,uBAC3CoD,EAAWrD,SAASC,cAAc,iBACxCoD,EAASC,UAAY,GACrB,MAAMC,EAAoBvD,SAASC,cAAc,gBACjDsD,EAAkBD,UAAY,GAC9B,MAAME,EAAsBxD,SAASC,cAAc,iBAC7CwD,EAAazD,SAASC,cAAc,cA3BtD,IAAwByD,EA8BZ,MAAMC,EAASX,GA9BHU,EA6BuBV,EAAYY,OA5BhDC,KAAKC,MAAMD,KAAKE,SAAWL,KA+BpBM,EAAQL,EAAOK,MAE3BjD,EAAW,iCADWI,EAAkBwC,EAAOM,8NAEnCC,EAAcP,EAAOQ,aACrBC,EAAOT,EAAOS,KACdC,EAAcV,EAAOU,YACrBC,EAAcX,EAAOY,OACrBC,EAAYb,EAAOc,KAEzBjB,EAAoBnB,YAAciC,EAClCb,EAAWpB,YAAc,GAAGmC,QAE5BpB,EAAkBf,YAAc6B,EAEhCf,EAAad,YAAc2B,EAE3BK,EAAYK,SAAQC,IAChB,MAAMC,EAAoB1B,EAAgB2B,MAAKrD,GAAQA,EAAKsD,MAAQH,EAAWI,KAC3EH,IACAD,EAAWK,KAAOJ,EAAkBI,KAAI,IAIhDX,EAAYK,SAAQC,IAChB,MAAMM,EAAiBjF,SAASkF,cAAc,MACxCC,EAAiBnF,SAASkF,cAAc,QAC9CC,EAAe9C,YAAcsC,EAAWK,KACxCG,EAAexE,UAAUC,IAAI,mBAE7B,MAAMwE,EAAiBpF,SAASkF,cAAc,QAC9CE,EAAe/C,YAAcsC,EAAWU,QACxCD,EAAezE,UAAUC,IAAI,mBAE7BqE,EAAetE,UAAUC,IAAI,eAC7BqE,EAAeK,YAAYH,GAC3BF,EAAeK,YAAYF,GAE3B7B,EAAkB+B,YAAYL,EAAe,IAG7Cb,EAAKR,OAAS,IACdQ,EAAKM,SAAQa,IACT,MAAMC,EAASxF,SAASkF,cAAc,UACtCM,EAAOnD,YAAc,IAAIkD,IACzBC,EAAO7E,UAAUC,IAAI,WACrByC,EAASiC,YAAYE,EAAO,IAGbxF,SAASyF,iBAAiB,0BAClCf,SAAQgB,IACfA,EAAOC,MAAMC,QAAU,cAAc,KAI7C9E,EAAoBC,EAAS,IAEhC8E,OAAMC,GAASC,QAAQC,IAAIF,EAAMG,WA0E1CnF,IACAoF,uBAvEInG,EAAS8B,iBAAiB,QAASpB,GACnCT,SAAS6B,iBAAiB,UAAWvB,E","sources":["src/js/popular-recipe.js"],"sourcesContent":["   const closeSVG = document.querySelector('.close-recipe-svg');\n    const backDrop = document.querySelector('.backdrop');\n    const popUp = document.querySelector('.pop-up-recipe');\n    const videoContainer = document.getElementById('video-container');\n    let player;\n\n    const BASE_URL = 'https://tasty-treats-backend.p.goit.global/api/recipes/';\n    const SECOND_URL = 'https://tasty-treats-backend.p.goit.global/api/ingredients';\n    const API_KEY = 'AIzaSyAX44YCtOJPGkNiZtRXagJevTZUvVOUYVc';\n\n    function getRandomIndex(max) {\n        return Math.floor(Math.random() * max);\n    }\n    // function fetchIngredientsData() {\n    //     fetch(SECOND_URL)\n    //         .then(response => response.json())\n    //         .then(data => {\n    //             console.log(data);\n    //         })\n    //         .catch(error => {\n    //             console.error('Error fetching data:', error);\n    //         });\n    // }\n    function fetchRecipeData() {\n        Promise.all([fetch(BASE_URL), fetch(SECOND_URL)])\n            .then(responses => Promise.all(responses.map(response => response.json())))\n            .then(data => {\n                const recipesData = data[0].results;\n                const ingredientsData = data[1];\n    \n                const recipeHeader = document.querySelector('.pop-up-recipe-header');\n                const recipeDescription = document.querySelector('.recipe-description');\n                const tagsList = document.querySelector('.tags-buttons');\n                tagsList.innerHTML = '';\n                const recipeIngredients = document.querySelector('.recipe-list');\n                recipeIngredients.innerHTML = '';\n                const recipeRatingElement = document.querySelector('.rating-value');\n                const recipeTime = document.querySelector('.span-time');\n    \n                const randomIndex = getRandomIndex(recipesData.length);\n                const recipe = recipesData[randomIndex];\n    \n                const title = recipe.title;\n                const videoId = getYouTubeVideoId(recipe.youtube);\n    const videoSrc = `https://www.youtube.com/embed/${videoId}?enablejsapi=1&origin=https://your-origin.com&modestbranding=1&rel=0&autoplay=1&showinfo=0&controls=1&mute=0&loop=0&iv_load_policy=3&cc_load_policy=1&start=0&theme=light&color=white&fs=1&autohide=2&enablejsapi=1`;\n                const description = recipe.instructions;\n                const tags = recipe.tags;\n                const ingredients = recipe.ingredients;\n                const ratingValue = recipe.rating;\n                const timeValue = recipe.time;\n    \n                recipeRatingElement.textContent = ratingValue;\n                recipeTime.textContent = `${timeValue} min`;\n    \n                recipeDescription.textContent = description;\n    \n                recipeHeader.textContent = title;\n    \n                ingredients.forEach(ingredient => {\n                    const matchedIngredient = ingredientsData.find(data => data._id === ingredient.id);\n                    if (matchedIngredient) {\n                        ingredient.name = matchedIngredient.name;\n                    }\n                });\n    \n                ingredients.forEach(ingredient => {\n                    const ingredientItem = document.createElement('li');\n                    const ingredientName = document.createElement('span');\n                    ingredientName.textContent = ingredient.name;\n                    ingredientName.classList.add('ingredient-name');\n    \n                    const measureContent = document.createElement('span');\n                    measureContent.textContent = ingredient.measure;\n                    measureContent.classList.add('measure-content');\n    \n                    ingredientItem.classList.add('recipe-item');\n                    ingredientItem.appendChild(ingredientName);\n                    ingredientItem.appendChild(measureContent);\n    \n                    recipeIngredients.appendChild(ingredientItem);\n                });\n    \n                if (tags.length > 0) {\n                    tags.forEach(tag => {\n                        const tagBtn = document.createElement('button');\n                        tagBtn.textContent = `#${tag}`;\n                        tagBtn.classList.add('tag-btn');\n                        tagsList.appendChild(tagBtn);\n                    });\n    \n                    const tagButtons = document.querySelectorAll('.tags-buttons .tag-btn');\n                    tagButtons.forEach(button => {\n                        button.style.display = 'inline-block';\n                    });\n                }\n    \n                createYouTubePlayer(videoSrc);\n            })\n            .catch(error => console.log(error.message));\n    }\n\n    function closePopUPRecipe() {\n        closeSVG.addEventListener('click', onClickSVG);\n        document.addEventListener('keydown', onDocumentKeyDown);\n    }\n\n    function onDocumentKeyDown(event) {\n        if (event.key === 'Escape') {\n            onClickSVG();\n        }\n    }\n\n    function onClickSVG() {\n        closeModal();\n    }\n\n    function onClickBackDrop(event) {\n        if (event.target === backDrop) {\n            closeModal();\n        }\n    }\n\n    function closeModal() {\n        backDrop.classList.add('hidden');\n        popUp.classList.add('hidden');\n        if (typeof player !== 'undefined') {\n            player.stopVideo();\n        }\n    }\n\n    function createYouTubePlayer(videoSrc) {\n        player = new YT.Player('video-container', {\n            videoId: getYouTubeVideoId(videoSrc),\n            playerVars: {\n                // Дополнительные параметры плеера, если нужно\n                // Например, autoplay: 1 (1 - включить автовоспроизведение, 0 - выключить)\n            },\n            events: {\n                onStateChange: onPlayerStateChange\n            }\n        });\n    }\n\n    function onPlayerStateChange(event) {\n        if (event.data === YT.PlayerState.PLAYING) {\n            player.getIframe().contentWindow.addEventListener('keydown', onPlayerKeyDown);\n        } else {\n            player.getIframe().contentWindow.removeEventListener('keydown', onPlayerKeyDown);\n        }\n    }\n\n    function getYouTubeVideoId(videoSrc) {\n        const videoIdMatch = videoSrc.match(/(?:\\?v=|\\/embed\\/|\\.be\\/)([\\w\\-]{11})/);\n        return videoIdMatch ? videoIdMatch[1] : null;\n    }\n\n    document.querySelector('.btn-add-favourite').addEventListener('click', onFavouriteBtnClick);\n\n    function onFavouriteBtnClick() {\n        const favouriteBtn = document.querySelector('.btn-add-favourite');\n        if (favouriteBtn.classList.contains('favourite')) {\n            favouriteBtn.classList.remove('favourite');\n            favouriteBtn.textContent = 'Add to Favorite';\n        } else {\n            favouriteBtn.classList.add('favourite');\n            favouriteBtn.textContent = 'Remove from favorite';\n        }\n    }\n\n    backDrop.addEventListener('click', onClickBackDrop);\n\n    fetchRecipeData();\n    createYouTubePlayer(); // вызываем createYouTubePlayer() перед clickONBackDrop()\n    fetchIngredientsData()\n    closePopUPRecipe();"],"names":["$018e6cdfe65ab2ee$var$closeSVG","document","querySelector","$018e6cdfe65ab2ee$var$backDrop","$018e6cdfe65ab2ee$var$popUp","getElementById","$018e6cdfe65ab2ee$var$player","$018e6cdfe65ab2ee$var$onDocumentKeyDown","event","key","$018e6cdfe65ab2ee$var$onClickSVG","$018e6cdfe65ab2ee$var$closeModal","classList","add","stopVideo","$018e6cdfe65ab2ee$var$createYouTubePlayer","videoSrc","YT","Player","videoId","$018e6cdfe65ab2ee$var$getYouTubeVideoId","playerVars","events","onStateChange","$018e6cdfe65ab2ee$var$onPlayerStateChange","data","PlayerState","PLAYING","getIframe","contentWindow","addEventListener","onPlayerKeyDown","removeEventListener","videoIdMatch","match","favouriteBtn","contains","remove","textContent","target","Promise","all","fetch","then","responses","map","response","json","data1","recipesData","results","ingredientsData","recipeHeader","recipeDescription","tagsList","innerHTML","recipeIngredients","recipeRatingElement","recipeTime","max","recipe","length","Math","floor","random","title","youtube","description","instructions","tags","ingredients","ratingValue","rating","timeValue","time","forEach","ingredient","matchedIngredient","find","_id","id","name","ingredientItem","createElement","ingredientName","measureContent","measure","appendChild","tag","tagBtn","querySelectorAll","button","style","display","catch","error","console","log","message","fetchIngredientsData"],"version":3,"file":"index.da8968c1.js.map"}