{"mappings":"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","sources":["src/js/popular-recipe.js"],"sourcesContent":["const closeSVG = document.querySelector('.close-recipe-svg');\n// const backDrop = document.querySelector('.backdrop-popup-recipe');\n// const popUp = document.querySelector('.pop-up-recipe');\n// const videoContainer = document.querySelector('#video-container');\n// let player;\n\n// const BASE_URL_POPUP = 'https://tasty-treats-backend.p.goit.global/api/recipes/';\n// const SECOND_URL = 'https://tasty-treats-backend.p.goit.global/api/ingredients';\n// const API_KEY = 'AIzaSyAX44YCtOJPGkNiZtRXagJevTZUvVOUYVc';\n\n// function getRandomIndex(max) {\n//     return Math.floor(Math.random() * max);\n// }\n\n// function fetchRecipeData() {\n//     Promise.all([fetch(BASE_URL_POPUP), fetch(SECOND_URL)])\n//         .then(responses => Promise.all(responses.map(response => response.json())))\n//         .then(data => {\n//             const recipesData = data[0].results;\n//             const ingredientsData = data[1];\n\n//             const recipeHeader = document.querySelector('.pop-up-recipe-header');\n//             const recipeDescription = document.querySelector('.recipe-description');\n//             const tagsList = document.querySelector('.tags-buttons');\n//             tagsList.innerHTML = '';\n//             const recipeIngredients = document.querySelector('.recipe-list');\n//             recipeIngredients.innerHTML = '';\n//             const recipeRatingElement = document.querySelector('.rating-value');\n//             const recipeTime = document.querySelector('.span-time');\n\n//             const randomIndex = getRandomIndex(recipesData.length);\n//             const recipe = recipesData[randomIndex];\n\n//             const title = recipe.title;\n//             const videoId = getYouTubeVideoId(recipe.youtube);\n// const videoSrc = `https://www.youtube.com/embed/${videoId}?enablejsapi=1&origin=https://your-origin.com&modestbranding=1&rel=0&autoplay=1&showinfo=0&controls=1&mute=0&loop=0&iv_load_policy=3&cc_load_policy=1&start=0&theme=light&color=white&fs=1&autohide=2&enablejsapi=1`;\n//             const description = recipe.instructions;\n//             const tags = recipe.tags;\n//             const ingredients = recipe.ingredients;\n//             const ratingValue = recipe.rating;\n//             const timeValue = recipe.time;\n\n//             recipeRatingElement.textContent = ratingValue;\n//             recipeTime.textContent = `${timeValue} min`;\n\n//             recipeDescription.textContent = description;\n\n//             recipeHeader.textContent = title;\n\n//             ingredients.forEach(ingredient => {\n//                 const matchedIngredient = ingredientsData.find(data => data._id === ingredient.id);\n//                 if (matchedIngredient) {\n//                     ingredient.name = matchedIngredient.name;\n//                 }\n//             });\n\n//             ingredients.forEach(ingredient => {\n//                 const ingredientItem = document.createElement('li');\n//                 const ingredientName = document.createElement('span');\n//                 ingredientName.textContent = ingredient.name;\n//                 ingredientName.classList.add('ingredient-name');\n\n//                 const measureContent = document.createElement('span');\n//                 measureContent.textContent = ingredient.measure;\n//                 measureContent.classList.add('measure-content');\n\n//                 ingredientItem.classList.add('recipe-item');\n//                 ingredientItem.appendChild(ingredientName);\n//                 ingredientItem.appendChild(measureContent);\n\n//                 recipeIngredients.appendChild(ingredientItem);\n//             });\n\n//             if (tags.length > 0) {\n//                 tags.forEach(tag => {\n//                     const tagBtn = document.createElement('button');\n//                     tagBtn.textContent = `#${tag}`;\n//                     tagBtn.classList.add('tag-btn');\n//                     tagsList.appendChild(tagBtn);\n//                 });\n\n//                 const tagButtons = document.querySelectorAll('.tags-buttons .tag-btn');\n//                 tagButtons.forEach(button => {\n//                     button.style.display = 'inline-block';\n//                 });\n//             }\n\n//             createYouTubePlayer(videoSrc);\n//         })\n//         .catch(error => console.log(error.message));\n// }\n// closeSVG.addEventListener('click', onClickSVG);\n\n// function onClickSVG() {\n//     stopVideoAndCloseModal();\n// }\n\n// backDrop.addEventListener('click', onClickBackDrop);\n\n// function onClickBackDrop(event) {\n//     if (event.target === backDrop) {\n//         stopVideoAndCloseModal();\n//     }\n// }\n\n// document.addEventListener('keydown', onDocumentKeyDown);\n\n// function onDocumentKeyDown(event) {\n//     if (event.key === 'Escape') {\n//     popUp.style.display = 'none';\n//     backDrop.style.display = 'none';\n//     }\n// }\n\n// function stopVideoAndCloseModal() {\n\n//     if (typeof player !== 'undefined' && typeof player.stopVideo === 'function') {\n//         player.stopVideo();\n//     }\n\n//     popUp.style.display = 'none';\n//     backDrop.style.display = 'none';\n// }\n\n// function createYouTubePlayer(videoSrc) {\n//     player = new YT.Player('video-container', {\n//         videoId: getYouTubeVideoId(videoSrc),\n//         playerVars: {\n//             // Дополнительные параметры плеера, если нужно\n//             // Например, autoplay: 1 (1 - включить автовоспроизведение, 0 - выключить)\n//         },\n//         events: {\n//             onStateChange: onPlayerStateChange\n//         }\n//     });\n// }\n\n// function onPlayerStateChange(event) {\n//     if (event.data === YT.PlayerState.PLAYING) {\n//         player.getIframe().contentWindow.addEventListener('keydown', onPlayerKeyDown);\n//     } else {\n//         player.getIframe().contentWindow.removeEventListener('keydown', onPlayerKeyDown);\n//     }\n// }\n\n// function getYouTubeVideoId(videoSrc) {\n//     const videoIdMatch = videoSrc.match(/(?:\\?v=|\\/embed\\/|\\.be\\/)([\\w\\-]{11})/);\n//     return videoIdMatch ? videoIdMatch[1] : null;\n// }\n\n// document.querySelector('.btn-add-favourite').addEventListener('click', onFavouriteBtnClick);\n\n// function onFavouriteBtnClick() {\n//     const favouriteBtn = document.querySelector('.btn-add-favourite');\n//     if (favouriteBtn.classList.contains('favourite-popup-recipe')) {\n//         favouriteBtn.classList.remove('favourite-popup-recipe');\n//         favouriteBtn.textContent = 'Add to Favorite';\n//     } else {\n//         favouriteBtn.classList.add('favourite-popup-recipe');\n//         favouriteBtn.textContent = 'Remove from favorite';\n//     }\n// }\n// const seeRecipe = document.querySelector('.recipe_desc_btn');\n\n// seeRecipe.addEventListener('click', onClickRecipeDescrBtn);\n// function onClickRecipeDescrBtn() {\n\n//     // Toggle the visibility of the modal and backdrop using classes\n//     popUpRecipe.classList.add('show-modal');\n//     backdropPopupRecipe.classList.add('show-modal');\n// }\n\n// fetchRecipeData();\n\nconst backDrop = document.querySelector('.backdrop');\nconst popUp = document.querySelector('.pop-up-recipe');\nconst videoContainer = document.getElementById('video-container');\nlet player;\n\nconst BASE_URL = 'https://tasty-treats-backend.p.goit.global/api/recipes/';\nconst SECOND_URL = 'https://tasty-treats-backend.p.goit.global/api/ingredients';\nconst API_KEY = 'AIzaSyAX44YCtOJPGkNiZtRXagJevTZUvVOUYVc';\n\nfunction getRandomIndex(max) {\n  return Math.floor(Math.random() * max);\n}\n// function fetchIngredientsData() {\n//     fetch(SECOND_URL)\n//         .then(response => response.json())\n//         .then(data => {\n//             console.log(data);\n//         })\n//         .catch(error => {\n//             console.error('Error fetching data:', error);\n//         });\n// }\nfunction fetchRecipeData() {\n  Promise.all([fetch(BASE_URL), fetch(SECOND_URL)])\n    .then(responses => Promise.all(responses.map(response => response.json())))\n    .then(data => {\n      const recipesData = data[0].results;\n      const ingredientsData = data[1];\n\n      const recipeHeader = document.querySelector('.pop-up-recipe-header');\n      const recipeDescription = document.querySelector('.recipe-description');\n      const tagsList = document.querySelector('.tags-buttons');\n      tagsList.innerHTML = '';\n      const recipeIngredients = document.querySelector('.recipe-list');\n      recipeIngredients.innerHTML = '';\n      const recipeRatingElement = document.querySelector('.rating-value');\n      const recipeTime = document.querySelector('.span-time');\n\n      const randomIndex = getRandomIndex(recipesData.length);\n      const recipe = recipesData[randomIndex];\n\n      const title = recipe.title;\n      const videoId = getYouTubeVideoId(recipe.youtube);\n      const videoSrc = `https://www.youtube.com/embed/${videoId}?enablejsapi=1&origin=https://your-origin.com&modestbranding=1&rel=0&autoplay=1&showinfo=0&controls=1&mute=0&loop=0&iv_load_policy=3&cc_load_policy=1&start=0&theme=light&color=white&fs=1&autohide=2&enablejsapi=1`;\n      const description = recipe.instructions;\n      const tags = recipe.tags;\n      const ingredients = recipe.ingredients;\n      const ratingValue = recipe.rating;\n      const timeValue = recipe.time;\n\n      recipeRatingElement.textContent = ratingValue;\n      recipeTime.textContent = `${timeValue} min`;\n\n      recipeDescription.textContent = description;\n\n      recipeHeader.textContent = title;\n\n      ingredients.forEach(ingredient => {\n        const matchedIngredient = ingredientsData.find(\n          data => data._id === ingredient.id\n        );\n        if (matchedIngredient) {\n          ingredient.name = matchedIngredient.name;\n        }\n      });\n\n      ingredients.forEach(ingredient => {\n        const ingredientItem = document.createElement('li');\n        const ingredientName = document.createElement('span');\n        ingredientName.textContent = ingredient.name;\n        ingredientName.classList.add('ingredient-name');\n\n        const measureContent = document.createElement('span');\n        measureContent.textContent = ingredient.measure;\n        measureContent.classList.add('measure-content');\n\n        ingredientItem.classList.add('recipe-item');\n        ingredientItem.appendChild(ingredientName);\n        ingredientItem.appendChild(measureContent);\n\n        recipeIngredients.appendChild(ingredientItem);\n      });\n\n      if (tags.length > 0) {\n        tags.forEach(tag => {\n          const tagBtn = document.createElement('button');\n          tagBtn.textContent = `#${tag}`;\n          tagBtn.classList.add('tag-btn');\n          tagsList.appendChild(tagBtn);\n        });\n\n        const tagButtons = document.querySelectorAll('.tags-buttons .tag-btn');\n        tagButtons.forEach(button => {\n          button.style.display = 'inline-block';\n        });\n      }\n\n      createYouTubePlayer(videoSrc);\n    })\n    .catch(error => console.log(error.message));\n}\n\nfunction closePopUPRecipe() {\n  closeSVG.addEventListener('click', onClickSVG);\n  document.addEventListener('keydown', onDocumentKeyDown);\n}\n\nfunction onDocumentKeyDown(event) {\n  if (event.key === 'Escape') {\n    onClickSVG();\n  }\n}\n\nfunction onClickSVG() {\n  closeModal();\n}\n\nfunction onClickBackDrop(event) {\n  if (event.target === backDrop) {\n    closeModal();\n  }\n}\n\nfunction closeModal() {\n  backDrop.classList.add('hidden');\n  popUp.classList.add('hidden');\n  if (typeof player !== 'undefined') {\n    player.stopVideo();\n  }\n}\n\nfunction createYouTubePlayer(videoSrc) {\n  player = new YT.Player('video-container', {\n    videoId: getYouTubeVideoId(videoSrc),\n    playerVars: {\n      // Дополнительные параметры плеера, если нужно\n      // Например, autoplay: 1 (1 - включить автовоспроизведение, 0 - выключить)\n    },\n    events: {\n      onStateChange: onPlayerStateChange,\n    },\n  });\n}\n\nfunction onPlayerStateChange(event) {\n  if (event.data === YT.PlayerState.PLAYING) {\n    player\n      .getIframe()\n      .contentWindow.addEventListener('keydown', onPlayerKeyDown);\n  } else {\n    player\n      .getIframe()\n      .contentWindow.removeEventListener('keydown', onPlayerKeyDown);\n  }\n}\n\nfunction getYouTubeVideoId(videoSrc) {\n  const videoIdMatch = videoSrc.match(/(?:\\?v=|\\/embed\\/|\\.be\\/)([\\w\\-]{11})/);\n  return videoIdMatch ? videoIdMatch[1] : null;\n}\n\ndocument\n  .querySelector('.btn-add-favourite')\n  .addEventListener('click', onFavouriteBtnClick);\n\nfunction onFavouriteBtnClick() {\n  const favouriteBtn = document.querySelector('.btn-add-favourite');\n  if (favouriteBtn.classList.contains('favourite')) {\n    favouriteBtn.classList.remove('favourite');\n    favouriteBtn.textContent = 'Add to Favorite';\n  } else {\n    favouriteBtn.classList.add('favourite');\n    favouriteBtn.textContent = 'Remove from favorite';\n  }\n}\n\nbackDrop.addEventListener('click', onClickBackDrop);\n\nfetchRecipeData();\n"],"names":["player","closeSVG","document","querySelector","backDrop","popUp","videoContainer","getElementById","BASE_URL","SECOND_URL","API_KEY","getRandomIndex","max","Math","floor","random","fetchRecipeData","Promise","all","fetch","then","responses","map","response","json","data1","recipesData","results","ingredientsData","recipeHeader","recipeDescription","tagsList","innerHTML","recipeIngredients","recipeRatingElement","recipeTime","recipe","length","title","videoId","getYouTubeVideoId","youtube","videoSrc","concat","description","instructions","tags","ingredients","ratingValue","rating","timeValue","time","textContent","forEach","ingredient","matchedIngredient","find","data","_id","id","name","ingredientItem","createElement","ingredientName","classList","add","measureContent","measure","appendChild","tag","tagBtn","querySelectorAll","button","style","display","createYouTubePlayer","catch","error","console","log","message","closePopUPRecipe","addEventListener","onClickSVG","onDocumentKeyDown","event","key","closeModal","onClickBackDrop","target","stopVideo","YT","Player","playerVars","events","onStateChange","onPlayerStateChange","PlayerState","PLAYING","getIframe","contentWindow","onPlayerKeyDown","removeEventListener","videoIdMatch","match","onFavouriteBtnClick","favouriteBtn","contains","remove"],"version":3,"file":"index.7c80d9ed.js.map"}